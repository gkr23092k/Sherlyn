"use strict";(self.webpackChunkSherlyn=self.webpackChunkSherlyn||[]).push([[462],{60462:(U,S,r)=>{r.r(S),r.d(S,{DashboardModule:()=>P});var D=r(60177),k=r(30803),v=r(67376),t=r(17705),f=r(31088),l=r(8585),h=r(69153),y=r(53339),w=r(31591),I=r(20205),b=r(32102),g=r(25084),C=r(89417);l.DPo(y.A);let M=(()=>{class s{constructor(e,a){this.data=e,this.fb=a,this.dataarrayobj=[],this.content="",this.groupedData=[],this.msg="",this.grpcount=0,this.dataforfilter=[],this.colorlist=[],this.enddaterange=new Date,this.startdaterange=(0,w.e)(new Date,30),this.dataEmitter=new t.bkB}ngOnChanges(){this.groupedData=this.spendlist,console.log(this.spendlist),this.initializeChart()}onDateRangeChanged(){console.log("Start Date:",this.startdaterange),console.log("End Date:",this.enddaterange),this.enddaterange&&this.dataEmitter.emit({startdate:this.startdaterange,enddate:this.enddaterange})}initializeChart(){this.chart=l.vtF("subdonut-chartdiv",h.KC),this.chart.hiddenState.properties.opacity=0,this.chart.data=this.groupedData;const e=this.chart.series.push(new h.tB);e.dataFields.value="totalPrice",e.dataFields.category="matgroup",this.chart.legend=new h.s$,this.chart.legend.scrollable=!0,this.chart.legend.maxHeight=80,e.slices.template.events.on("hit",a=>{console.log(a.target.dataItem.category)})}disposeChart(){this.chart?(this.chart.dispose(),console.log("Chart disposed successfully.")):console.warn("Chart was not initialized before disposal.")}static#t=this.\u0275fac=function(a){return new(a||s)(t.rXU(I.i),t.rXU(f.f))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-breakdowndonut"]],inputs:{spendlist:["Spendlist","spendlist"],selectedgroup:["Chosengroup","selectedgroup"]},outputs:{dataEmitter:"dataEmitter"},features:[t.OA$],decls:1,vars:0,consts:[["id","subdonut-chartdiv",1,"shadow-lg","p-2","mx-1",2,"width","99%","height","76vh"]],template:function(a,i){1&a&&t.nrm(0,"div",0)},styles:[".subheader[_ngcontent-%COMP%]{position:absolute;top:100px}"]})}return s})();function F(s,u){if(1&s){const e=t.RV6();t.j41(0,"span",9)(1,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.selectedgroup=!1)}),t.EFF(2,"X"),t.k0s(),t.j41(3,"h1",11),t.EFF(4),t.k0s(),t.nrm(5,"app-breakdowndonut",12),t.k0s()}if(2&s){const e=t.XpG();t.R7$(4),t.SpI("Drill Down ",e.selectedgroup,""),t.R7$(1),t.Y8G("Spendlist",e.matnamedata)("Chosengroup",e.selectedgroup)}}l.DPo(y.A);let G=(()=>{class s{constructor(e,a){this.data=e,this.fb=a,this.dataarrayobj=[],this.content="",this.groupedData=[],this.msg="",this.grpcount=0,this.dataforfilter=[],this.colorlist=[],this.enddaterange=new Date,this.startdaterange=(0,w.e)(new Date,30),this.showFiller=!1,this.dataEmitter=new t.bkB}ngOnChanges(){this.groupedData=this.spendlist,console.log(this.spendlist),this.initializeChart()}ngOnInit(){}onDateRangeChanged(){console.log("Start Date:",this.startdaterange),console.log("End Date:",this.enddaterange),this.enddaterange&&this.dataEmitter.emit({startdate:this.startdaterange,enddate:this.enddaterange})}initializeChart(){this.chart=l.vtF("donut-chartdiv",h.KC),this.chart.data=this.groupedData;const e=this.chart.series.push(new h.tB);this.chart.hiddenState.properties.opacity=0,e.dataFields.value="totalPrice",e.dataFields.category="matgroup",this.chart.legend=new h.s$,this.chart.legend.scrollable=!0,this.chart.legend.maxHeight=80,this.matnamedata=void 0,this.selectedgroup=void 0,e.slices.template.events.on("hit",a=>{e.slices.each(n=>{n.isActive=!1}),console.log(a.target.dataItem.category),this.selectedgroup=a.target.dataItem.category,this.fb.getmatnamespendItems(a.target.dataItem.category,this.startdaterange,this.enddaterange).subscribe(n=>{this.matnamedata=n,this.matnamedata=v.orderBy(this.matnamedata,"totalPrice","desc"),console.log(n,"group spend items")})})}disposeChart(){this.chart?(this.chart.dispose(),console.log("Chart disposed successfully.")):console.warn("Chart was not initialized before disposal.")}generateAmChartsHexColors(e){const a=[],i=360/e;for(let n=0;n<e;n++){const o=n*i,p=70+20*Math.random(),d=40+20*Math.random(),c=this.hslToHex(o,p,d);a.push(c)}return a}hslToHex(e,a,i){a/=100,i/=100;let n=(1-Math.abs(2*i-1))*a,o=n*(1-Math.abs(e/60%2-1)),p=i-n/2,d=0,c=0,m=0;return 0<=e&&e<60?(d=n,c=o,m=0):60<=e&&e<120?(d=o,c=n,m=0):120<=e&&e<180?(d=0,c=n,m=o):180<=e&&e<240?(d=0,c=o,m=n):240<=e&&e<300?(d=o,c=0,m=n):300<=e&&e<360&&(d=n,c=0,m=o),d=Math.round(255*(d+p)),c=Math.round(255*(c+p)),m=Math.round(255*(m+p)),`#${((1<<24)+(d<<16)+(c<<8)+m).toString(16).slice(1).toUpperCase()}`}static#t=this.\u0275fac=function(a){return new(a||s)(t.rXU(I.i),t.rXU(f.f))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["donut-chart"]],inputs:{spendlist:["Spendlist","spendlist"]},outputs:{dataEmitter:"dataEmitter"},features:[t.OA$],decls:13,vars:5,consts:[[1,"d-flex","justify-content-center"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"d-flex","flex-grow-1"],["id","donut-chartdiv",1,"shadow-lg","p-2","mx-1",2,"width","100%","height","76vh"],["style","width: 100%; height: 70vh;",4,"ngIf"],[2,"width","100%","height","70vh"],[1,"btn","btn-sm","btn-danger","closersub",3,"click"],[1,"subheader"],[3,"Spendlist","Chosengroup"]],template:function(a,i){if(1&a&&(t.j41(0,"div",0)(1,"mat-form-field")(2,"mat-label"),t.EFF(3,"Selected date range MM/DD/YYYY"),t.k0s(),t.j41(4,"mat-date-range-input",1)(5,"input",2),t.bIt("ngModelChange",function(o){return i.startdaterange=o}),t.k0s(),t.j41(6,"input",3),t.bIt("ngModelChange",function(o){return i.enddaterange=o})("ngModelChange",function(){return i.onDateRangeChanged()}),t.k0s()(),t.nrm(7,"mat-datepicker-toggle",4)(8,"mat-date-range-picker",null,5),t.k0s()(),t.j41(10,"div",6),t.nrm(11,"div",7),t.DNE(12,F,6,3,"span",8),t.k0s()),2&a){const n=t.sdS(9);t.R7$(4),t.Y8G("rangePicker",n),t.R7$(1),t.Y8G("ngModel",i.startdaterange),t.R7$(1),t.Y8G("ngModel",i.enddaterange),t.R7$(1),t.Y8G("for",n),t.R7$(5),t.Y8G("ngIf",i.selectedgroup)}},dependencies:[D.bT,b.rl,b.nJ,b.yw,g.bU,g.el,g.xR,g.IG,g.SG,C.me,C.BC,C.vS,M],styles:[".subheader[_ngcontent-%COMP%]{position:absolute;top:27%;left:52%}.closersub[_ngcontent-%COMP%]{position:absolute;top:30%;right:2%;z-index:5;opacity:.5}"]})}return s})();var x=r(36554);l.DPo(y.A);let Y=(()=>{class s{constructor(e,a,i,n){this.data=e,this.fb=a,this.ngZone=i,this.spinner=n,this.dataarrayobj=[],this.chartdiv="",this.chartCreated=!1,this.zoomRange="days"}ngOnChanges(){this.spendlist&&this.Idtoken&&(this.dataarrayobj=this.spendlist,this.chartdiv="chartdiv-"+this.Idtoken,console.log(this.spendlist,this.Idtoken,this.chartdiv),this.chartCreated=!1,this.spinner.show())}ngOnInit(){this.spendlist&&this.Idtoken&&(this.spinner.show(),this.createChart())}ngAfterViewChecked(){this.spendlist&&this.Idtoken&&!this.chartCreated&&this.createChart()}createChart(){this.ngZone.runOutsideAngular(()=>{if(this.chart&&this.chart.dispose(),!document.getElementById(this.chartdiv))return console.warn(`Element with id ${this.chartdiv} is missing in DOM.`),void this.spinner.hide();this.chart=l.vtF(this.chartdiv,h.C1),this.chartCreated=!0,this.chart.data=this.dataarrayobj;let a=this.chart.xAxes.push(new h.cX);a.renderer.minGridDistance=25,a.renderer.labels.template.fontSize=12,a.renderer.labels.template.rotation=45,a.renderer.grid.template.location=0,this.chart.yAxes.push(new h.FL);let n=this.chart.series.push(new h.kW);n.name="matprice",n.fill=l.yWT(this.colorcode),n.dataFields.valueY="matprice",n.dataFields.dateX="date",n.columns.template.propertyFields.fillOpacity="fillOpacity",n.columns.template.propertyFields.stroke="stroke",n.columns.template.propertyFields.strokeWidth="strokeWidth",n.columns.template.propertyFields.strokeDasharray="columnDash",n.tooltip&&(n.tooltip.label.textAlign="middle");let o=this.chart.series.push(new h.Im);o.name="Expenses",o.dataFields.valueY="matprice",o.dataFields.dateX="date",o.stroke=l.yWT(this.colorcode,.3),o.strokeWidth=3,o.propertyFields.strokeDasharray="lineDash",o.tooltip&&(o.tooltip.label.textAlign="middle");let p=o.bullets.push(new h.Dv);p.fill=l.yWT("#fdd400"),p.tooltipText="[#fff font-size: 0.8rem]{name} \n {dateX}\n[/][#fff font-size: 1rem]{valueY}[/] [#fff]{additional}[/]";let d=p.createChild(l.jlt);d.radius=4,d.fill=l.yWT("#fff"),d.strokeWidth=1,this.chart.cursor=new h.Av,this.chart.cursor.behavior="zoomX",this.chart.cursor.lineX.disabled=!0,this.chart.cursor.lineY.disabled=!0,this.chart.scrollbarX=new l.ZeV,this.chart.scrollbarX.marginBottom=30,this.chart.events.on("ready",()=>{this.spinner.hide()})}),this.chart.events.on("ready",()=>{const e=new Date;let a;if("days"===this.zoomRange)a=new Date(e.getFullYear(),e.getMonth(),e.getDate()-7),this.chart.xAxes.getIndex(0).zoomToDates(a,e,!0);else if("months"===this.zoomRange){a=new Date(e.getFullYear(),e.getMonth()-6,1);const i=new Date(e.getFullYear(),e.getMonth()+1,1);this.chart.xAxes.getIndex(0).zoomToDates(a,i,!0)}})}ngOnDestroy(){this.chart&&this.chart.dispose(),this.spinner.hide()}static#t=this.\u0275fac=function(a){return new(a||s)(t.rXU(I.i),t.rXU(f.f),t.rXU(t.SKi),t.rXU(x.ex))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-bar-line"]],inputs:{spendlist:["Spendlist","spendlist"],Idtoken:"Idtoken",colorcode:"colorcode",zoomRange:"zoomRange"},features:[t.OA$],decls:4,vars:2,consts:[[1,"shadow-lg","p-2","m-2",2,"width","99%","height","86vh",3,"id"],["bdColor","rgba(0, 0, 0, 0.8)","size","large","color","#fff","type","ball-clip-rotate-multiple",3,"fullScreen"],[2,"color","white"]],template:function(a,i){1&a&&(t.nrm(0,"div",0),t.j41(1,"ngx-spinner",1)(2,"p",2),t.EFF(3," Loading... "),t.k0s()()),2&a&&(t.Y8G("id","chartdiv-"+i.Idtoken),t.R7$(1),t.Y8G("fullScreen",!0))},dependencies:[x.et],styles:["#chartdiv[_ngcontent-%COMP%]{flex:1;height:90%;min-height:10px;width:100%;max-height:1500px}  g>rect{position:absolute;top:50px;background-color:red!important}  .amcharts-amexport-item.amcharts-amexport-item-level-0{position:relative;top:100px}"]})}return s})();function R(s,u){if(1&s){const e=t.RV6();t.j41(0,"donut-chart",2),t.bIt("dataEmitter",function(i){t.eBV(e);const n=t.XpG();return t.Njj(n.receiveData(i))}),t.k0s()}if(2&s){const e=t.XpG();t.Y8G("Spendlist",e.groupeddata)}}function A(s,u){if(1&s&&t.nrm(0,"app-bar-line",3),2&s){const e=t.XpG();t.Y8G("Idtoken",1)("colorcode","red")("Spendlist",e.data)("zoomRange","days")}}function T(s,u){if(1&s&&t.nrm(0,"app-bar-line",3),2&s){const e=t.XpG();t.Y8G("Idtoken",2)("colorcode","red")("Spendlist",e.groupeddatamonthly)("zoomRange","months")}}function E(s,u){if(1&s&&t.nrm(0,"app-bar-line",3),2&s){const e=t.XpG();t.Y8G("Idtoken",3)("colorcode","green")("Spendlist",e.investdata)("zoomRange","days")}}function X(s,u){if(1&s&&t.nrm(0,"app-bar-line",3),2&s){const e=t.XpG();t.Y8G("Idtoken",4)("colorcode","green")("Spendlist",e.groupeddatamonthlyinv)("zoomRange","months")}}const z=[{path:"main",component:(()=>{class s{constructor(e){this.fb=e,this.ischart="SDAY"}ngOnInit(){this.fb.emitViewTokem().subscribe(e=>{this.ischart=e}),this.fb.getAllspendItems().subscribe(e=>{this.data=e}),this.fb.getmatgroupspendItems().subscribe(e=>{this.groupeddata=e,this.groupeddata=v.orderBy(this.groupeddata,"totalPrice","desc")}),this.fb.getAllSpendItemsMonthly().subscribe(e=>{this.groupeddatamonthly=e}),this.fb.getAllinvestItems().subscribe(e=>{this.investdata=e}),this.fb.getAllInvestItemsMonthly().subscribe(e=>{this.groupeddatamonthlyinv=e})}receiveData(e){console.log(e),this.fb.getmatgroupspendItems(e.startdate,e.enddate).subscribe(a=>{this.groupeddata=a,this.groupeddata=v.orderBy(this.groupeddata,"totalPrice","desc")})}static#t=this.\u0275fac=function(a){return new(a||s)(t.rXU(f.f))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-dashboardmain"]],decls:5,vars:5,consts:[[3,"Spendlist","dataEmitter",4,"ngIf"],[3,"Idtoken","colorcode","Spendlist","zoomRange",4,"ngIf"],[3,"Spendlist","dataEmitter"],[3,"Idtoken","colorcode","Spendlist","zoomRange"]],template:function(a,i){1&a&&(t.DNE(0,R,1,1,"donut-chart",0),t.DNE(1,A,1,4,"app-bar-line",1),t.DNE(2,T,1,4,"app-bar-line",1),t.DNE(3,E,1,4,"app-bar-line",1),t.DNE(4,X,1,4,"app-bar-line",1)),2&a&&(t.Y8G("ngIf","GROUP"==i.ischart),t.R7$(1),t.Y8G("ngIf","SDAY"==i.ischart),t.R7$(1),t.Y8G("ngIf","SMONTH"==i.ischart),t.R7$(1),t.Y8G("ngIf","IDAY"==i.ischart),t.R7$(1),t.Y8G("ngIf","IMONTH"==i.ischart))},dependencies:[D.bT,G,Y]})}return s})()},{path:"**",redirectTo:"main"}];let O=(()=>{class s{static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275mod=t.$C({type:s});static#a=this.\u0275inj=t.G2t({imports:[k.iI.forChild(z),k.iI]})}return s})();var j=r(99631),$=r(86600),B=r(90882);let P=(()=>{class s{static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275mod=t.$C({type:s});static#a=this.\u0275inj=t.G2t({imports:[D.MD,O,x.PO,b.RG,j.fS,g.X6,$.WX,C.YN,B.vg]})}return s})()}}]);