"use strict";(self.webpackChunkSherlyn=self.webpackChunkSherlyn||[]).push([[246],{2246:(T,f,d)=>{d.r(f),d.d(f,{CreditcardModule:()=>V});var l=d(60177),h=d(99631),g=d(57250),s=d(89417),C=d(30803),v=d(27468),t=d(17705),F=d(31088),m=d(36554),p=d(32102),u=d(86600);let y=(()=>{class e{ngOnChanges(i){}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-creditcardui"]],inputs:{carddetails:["Creditcards","carddetails"]},features:[t.OA$],decls:22,vars:13,consts:[[1,"credit-card"],[1,"card-header"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"me-5"],[1,"my-auto"],[1,"my-auto","fs-6","fw-bold","p-1",3,"ngClass"],["alt","type.logo",2,"height","5vh","width","9vh",3,"src"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s()(),t.j41(4,"div",2)(5,"div",3)(6,"p"),t.EFF(7),t.k0s(),t.j41(8,"p"),t.EFF(9),t.k0s()(),t.j41(10,"div",3)(11,"p"),t.EFF(12),t.k0s(),t.j41(13,"p",4),t.EFF(14),t.k0s()(),t.j41(15,"div",3)(16,"p",5),t.EFF(17),t.k0s(),t.j41(18,"span",6),t.EFF(19),t.nI1(20,"number"),t.k0s(),t.nrm(21,"img",7),t.k0s()()()),2&n&&(t.R7$(3),t.JRh(a.carddetails.cardname),t.R7$(4),t.JRh(a.carddetails.cardholder),t.R7$(2),t.SpI("**** **** **** ",a.carddetails.cardnumber,""),t.R7$(3),t.SpI(" VD ",a.carddetails.expirydate,""),t.R7$(2),t.SpI(" CVV ",a.carddetails.cvv,""),t.R7$(3),t.Lme(" ",a.carddetails.utilised,"/",a.carddetails.totallimit,""),t.R7$(1),t.Y8G("ngClass",a.carddetails.utilised/a.carddetails.totallimit*100<30?"text-success":"text-danger"),t.R7$(1),t.SpI(" ",t.i5U(20,10,a.carddetails.utilised/a.carddetails.totallimit*100,"1.2-2"),"% "),t.R7$(2),t.Y8G("src","assets/images/"+a.carddetails.type+".png",t.B4B))},dependencies:[l.YU,l.QX],styles:[".credit-card[_ngcontent-%COMP%]{width:40vh;height:25vh;background:linear-gradient(135deg,#da4c4c 0%,#77bee1 100%);color:#fff;border-radius:10px;padding:20px;box-shadow:0 4px 20px #0000004d;position:relative;overflow:hidden}.card-header[_ngcontent-%COMP%]{text-align:center}"]})}return e})();const b=["creditcard"];function j(e,c){if(1&e&&(t.qex(0),t.nrm(1,"app-creditcardui",10),t.bVm()),2&e){const i=c.$implicit;t.R7$(1),t.Y8G("Creditcards",i)}}function R(e,c){if(1&e&&(t.qex(0),t.DNE(1,j,2,1,"ng-container",9),t.bVm()),2&e){const i=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",i.data)}}function E(e,c){1&e&&(t.j41(0,"p"),t.EFF(1,"No cards found..."),t.k0s())}function I(e,c){if(1&e&&(t.j41(0,"div",6),t.DNE(1,R,2,1,"ng-container",7),t.DNE(2,E,2,0,"ng-template",null,8,t.C5r),t.k0s()),2&e){const i=t.sdS(3),n=t.XpG();t.R7$(1),t.Y8G("ngIf",n.data.length>0)("ngIfElse",i)}}function k(e,c){if(1&e){const i=t.RV6();t.j41(0,"form",11,12),t.bIt("ngSubmit",function(){t.eBV(i);const a=t.sdS(1),r=t.XpG();return t.Njj(r.addentry(a))}),t.j41(2,"div",13)(3,"div",14)(4,"mat-form-field",15)(5,"mat-label"),t.EFF(6,"Card Name"),t.k0s(),t.nrm(7,"input",16),t.k0s()(),t.j41(8,"div",14)(9,"mat-form-field",15)(10,"mat-label"),t.EFF(11,"Name on Card"),t.k0s(),t.nrm(12,"input",17),t.k0s()(),t.j41(13,"div",14)(14,"mat-form-field",15)(15,"mat-label"),t.EFF(16,"Card Number"),t.k0s(),t.j41(17,"input",18),t.bIt("ngModelChange",function(a){t.eBV(i);const r=t.XpG();return t.Njj(r.cardnumber=a)}),t.k0s()()(),t.j41(18,"div",19)(19,"mat-form-field",15)(20,"mat-label"),t.EFF(21,"Valid"),t.k0s(),t.nrm(22,"input",20),t.k0s()(),t.j41(23,"div",19)(24,"mat-form-field",15)(25,"mat-label"),t.EFF(26,"CVV"),t.k0s(),t.nrm(27,"input",21),t.k0s()(),t.j41(28,"div",19)(29,"mat-form-field",15)(30,"mat-label"),t.EFF(31,"Total Limit"),t.k0s(),t.nrm(32,"input",22),t.k0s()(),t.j41(33,"div",19)(34,"mat-form-field",15)(35,"mat-label"),t.EFF(36,"Card Type"),t.k0s(),t.j41(37,"mat-select",23)(38,"mat-option",24),t.EFF(39,"VISA"),t.k0s(),t.j41(40,"mat-option",24),t.EFF(41,"MASTER"),t.k0s(),t.j41(42,"mat-option",24),t.EFF(43,"RUPAY"),t.k0s()()()(),t.j41(44,"div",14)(45,"button",25),t.EFF(46,"Submit"),t.k0s()()()()}if(2&e){const i=t.sdS(1),n=t.XpG();t.R7$(17),t.Y8G("ngModel",n.cardnumber),t.R7$(21),t.Y8G("value","visa"),t.R7$(2),t.Y8G("value","master"),t.R7$(2),t.Y8G("value","rupay"),t.R7$(3),t.Y8G("disabled",i.invalid)}}const $=[{path:"main",component:(()=>{class e{constructor(i,n){this.fb=i,this.spinner=n,this.isnewentry=!1,this.data=[]}ngOnInit(){this.refreshcarddata()}addentry(i){console.log(i),this.spinner.show(),this.creditcard.form.patchValue({...i});const n={...i.value};this.fb.CreditCards(n).finally(()=>{this.creditcard.resetForm(),this.refreshcarddata(),this.spinner.hide()})}refreshcarddata(){this.spinner.show(),(0,v.p)({creditcards:this.fb.getAllCreditcards(),lendItems:this.fb.getAllLenditems(),repayeditems:this.fb.getAllCreditcardRepayments()}).subscribe(({creditcards:i,lendItems:n,repayeditems:a})=>{n=n.map(r=>(a.find(o=>{console.log(r,o),o.cardname===r.cardname&&(r.utilised=r.utilised-o.repaidtotal)}),r)),this.data=i.map(r=>{let o=n.find(M=>M.cardname===r.cardname);return r.utilised=r.utilised?r.utilised:0,o?{...r,...o}:r}),console.log(this.data),this.spinner.hide()},i=>{console.error("Error fetching data:",i),this.spinner.hide()})}static#t=this.\u0275fac=function(n){return new(n||e)(t.rXU(F.f),t.rXU(m.ex))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-creditmain"]],viewQuery:function(n,a){if(1&n&&t.GBs(b,5),2&n){let r;t.mGM(r=t.lsd())&&(a.creditcard=r.first)}},decls:8,vars:4,consts:[[1,"d-flex","justify-content-center","mb-2"],[1,"btn","btn-sm","btn-info","text-white",3,"click"],["class","container d-flex flex-wrap gap-3 justify-content-center",4,"ngIf"],["class","container vh-50 mt-3",3,"ngSubmit",4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","large","color","#fff","type","ball-clip-rotate-multiple",3,"fullScreen"],[2,"color","white"],[1,"container","d-flex","flex-wrap","gap-3","justify-content-center"],[4,"ngIf","ngIfElse"],["content",""],[4,"ngFor","ngForOf"],[3,"Creditcards"],[1,"container","vh-50","mt-3",3,"ngSubmit"],["creditcard","ngForm"],[1,"row"],[1,"col-12"],["appearance","fill",1,"w-100"],["matInput","","required","","placeholder","Card Name","ngModel","","name","cardname"],["matInput","","required","","placeholder","Name on card","ngModel","","name","cardholder","type","text"],["matInput","","required","","placeholder","Last 4 digits","name","cardnumber","type","text","maxlength","4","inputmode","numeric",3,"ngModel","ngModelChange"],[1,"col-md-6"],["matInput","","required","","placeholder","mm/yy","type","text","maxlength","5","minlength","5","inputmode","numeric","ngModel","","name","expirydate"],["matInput","","required","","placeholder","CVV","maxlength","3","minlength","3","pattern","\\d{3}","inputmode","numeric","ngModel","","name","cvv","type","text"],["matInput","","required","","placeholder","Total Limit","ngModel","","name","totallimit","type","number"],["required","","ngModel","","name","type"],[3,"value"],["type","submit",1,"btn","btn-success","w-100",3,"disabled"]],template:function(n,a){1&n&&(t.j41(0,"span",0)(1,"button",1),t.bIt("click",function(){return a.isnewentry=!a.isnewentry}),t.EFF(2),t.k0s()(),t.DNE(3,I,4,2,"div",2),t.DNE(4,k,47,5,"form",3),t.j41(5,"ngx-spinner",4)(6,"p",5),t.EFF(7," Loading... "),t.k0s()()),2&n&&(t.R7$(2),t.JRh(a.isnewentry?"Back":"Add card"),t.R7$(1),t.Y8G("ngIf",!a.isnewentry),t.R7$(1),t.Y8G("ngIf",a.isnewentry),t.R7$(1),t.Y8G("fullScreen",!0))},dependencies:[l.Sq,l.bT,p.rl,p.nJ,h.fg,s.qT,s.me,s.Q0,s.BC,s.cb,s.YS,s.xh,s.tU,s.R_,s.vS,s.cV,g.VO,u.wT,m.et,y]})}return e})()},{path:"**",redirectTo:"main"}];let x=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.$C({type:e});static#n=this.\u0275inj=t.G2t({imports:[C.iI.forChild($),C.iI]})}return e})();var G=d(88834),S=d(21801);let V=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.$C({type:e});static#n=this.\u0275inj=t.G2t({imports:[l.MD,x,G.Hl,p.RG,h.fS,u.WX,s.YN,s.X1,S.m_,g.Ve,u.Sy,m.PO]})}return e})()}}]);