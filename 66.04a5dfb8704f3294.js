"use strict";(self.webpackChunkSherlyn=self.webpackChunkSherlyn||[]).push([[66],{25066:(W,y,s)=>{s.r(y),s.d(y,{DashboardModule:()=>Y});var g=s(60177),k=s(30803),e=s(17705),_=s(31088),l=s(8585),c=s(69153),b=s(53339),M=s(31591),C=s(20205),v=s(32102),m=s(25084),w=s(89417);l.DPo(b.A);let I=(()=>{class i{constructor(t,r){this.data=t,this.fb=r,this.dataarrayobj=[],this.content="",this.groupedData=[],this.msg="",this.grpcount=0,this.dataforfilter=[],this.colorlist=[],this.enddaterange=new Date,this.startdaterange=(0,M.e)(new Date,30),this.dataEmitter=new e.bkB}ngOnChanges(){this.groupedData=this.spendlist,console.log(this.spendlist),this.initializeChart()}onDateRangeChanged(){console.log("Start Date:",this.startdaterange),console.log("End Date:",this.enddaterange),this.enddaterange&&this.dataEmitter.emit({startdate:this.startdaterange,enddate:this.enddaterange})}initializeChart(){this.chart=l.vtF("subdonut-chartdiv",c.KC),this.chart.hiddenState.properties.opacity=0,this.chart.data=this.groupedData;const t=this.chart.series.push(new c.tB);t.dataFields.value="totalPrice",t.dataFields.category="matgroup",this.chart.legend=new c.s$,t.slices.template.events.on("hit",r=>{console.log(r.target.dataItem.category)})}disposeChart(){this.chart?(this.chart.dispose(),console.log("Chart disposed successfully.")):console.warn("Chart was not initialized before disposal.")}static#t=this.\u0275fac=function(r){return new(r||i)(e.rXU(C.i),e.rXU(_.f))};static#e=this.\u0275cmp=e.VBU({type:i,selectors:[["app-breakdowndonut"]],inputs:{spendlist:["Spendlist","spendlist"],selectedgroup:["Chosengroup","selectedgroup"]},outputs:{dataEmitter:"dataEmitter"},features:[e.OA$],decls:1,vars:0,consts:[["id","subdonut-chartdiv",1,"shadow-lg","p-2","mx-1",2,"width","99%","height","70vh"]],template:function(r,n){1&r&&e.nrm(0,"div",0)},styles:[".subheader[_ngcontent-%COMP%]{position:absolute;top:100px}"]})}return i})();function E(i,d){if(1&i){const t=e.RV6();e.j41(0,"span",9)(1,"button",10),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.selectedgroup=!1)}),e.EFF(2,"X"),e.k0s(),e.j41(3,"h1",11),e.EFF(4),e.k0s(),e.nrm(5,"app-breakdowndonut",12),e.k0s()}if(2&i){const t=e.XpG();e.R7$(4),e.SpI("Drill Down ",t.selectedgroup,""),e.R7$(1),e.Y8G("Spendlist",t.matnamedata)("Chosengroup",t.selectedgroup)}}l.DPo(b.A);let F=(()=>{class i{constructor(t,r){this.data=t,this.fb=r,this.dataarrayobj=[],this.content="",this.groupedData=[],this.msg="",this.grpcount=0,this.dataforfilter=[],this.colorlist=[],this.enddaterange=new Date,this.startdaterange=(0,M.e)(new Date,30),this.showFiller=!1,this.dataEmitter=new e.bkB}ngOnChanges(){this.groupedData=this.spendlist,console.log(this.spendlist),this.initializeChart()}ngOnInit(){}onDateRangeChanged(){console.log("Start Date:",this.startdaterange),console.log("End Date:",this.enddaterange),this.enddaterange&&this.dataEmitter.emit({startdate:this.startdaterange,enddate:this.enddaterange})}initializeChart(){this.chart=l.vtF("donut-chartdiv",c.KC),this.chart.data=this.groupedData;const t=this.chart.series.push(new c.tB);this.chart.hiddenState.properties.opacity=0,t.dataFields.value="totalPrice",t.dataFields.category="matgroup",this.chart.legend=new c.s$,this.matnamedata=void 0,this.selectedgroup=void 0,t.slices.template.events.on("hit",r=>{t.slices.each(a=>{a.isActive=!1}),console.log(r.target.dataItem.category),this.selectedgroup=r.target.dataItem.category,this.fb.getmatnamespendItems(r.target.dataItem.category,this.startdaterange,this.enddaterange).subscribe(a=>{this.matnamedata=a,console.log(a,"group spend items")})})}disposeChart(){this.chart?(this.chart.dispose(),console.log("Chart disposed successfully.")):console.warn("Chart was not initialized before disposal.")}static#t=this.\u0275fac=function(r){return new(r||i)(e.rXU(C.i),e.rXU(_.f))};static#e=this.\u0275cmp=e.VBU({type:i,selectors:[["donut-chart"]],inputs:{spendlist:["Spendlist","spendlist"]},outputs:{dataEmitter:"dataEmitter"},features:[e.OA$],decls:13,vars:5,consts:[[1,"d-flex","justify-content-center"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"d-flex","flex-grow-1"],["id","donut-chartdiv",1,"shadow-lg","p-2","mx-1",2,"width","100%","height","70vh"],["style","width: 100%; height: 70vh;",4,"ngIf"],[2,"width","100%","height","70vh"],[1,"btn","btn-sm","btn-danger","closersub",3,"click"],[1,"subheader"],[3,"Spendlist","Chosengroup"]],template:function(r,n){if(1&r&&(e.j41(0,"div",0)(1,"mat-form-field")(2,"mat-label"),e.EFF(3,"Selected date range MM/DD/YYYY"),e.k0s(),e.j41(4,"mat-date-range-input",1)(5,"input",2),e.bIt("ngModelChange",function(o){return n.startdaterange=o}),e.k0s(),e.j41(6,"input",3),e.bIt("ngModelChange",function(o){return n.enddaterange=o})("ngModelChange",function(){return n.onDateRangeChanged()}),e.k0s()(),e.nrm(7,"mat-datepicker-toggle",4)(8,"mat-date-range-picker",null,5),e.k0s()(),e.j41(10,"div",6),e.nrm(11,"div",7),e.DNE(12,E,6,3,"span",8),e.k0s()),2&r){const a=e.sdS(9);e.R7$(4),e.Y8G("rangePicker",a),e.R7$(1),e.Y8G("ngModel",n.startdaterange),e.R7$(1),e.Y8G("ngModel",n.enddaterange),e.R7$(1),e.Y8G("for",a),e.R7$(5),e.Y8G("ngIf",n.selectedgroup)}},dependencies:[g.bT,v.rl,v.nJ,v.yw,m.bU,m.el,m.xR,m.IG,m.SG,w.me,w.BC,w.vS,I],styles:[".subheader[_ngcontent-%COMP%]{position:absolute;top:30%;left:52%}.closersub[_ngcontent-%COMP%]{position:absolute;top:30%;right:2%;z-index:5;opacity:.5}"]})}return i})();var D=s(36554);l.DPo(b.A);let T=(()=>{class i{constructor(t,r,n,a){this.data=t,this.fb=r,this.ngZone=n,this.spinner=a,this.dataarrayobj=[],this.chartdiv="",this.chartCreated=!1,this.zoomRange="days"}ngOnChanges(){this.spendlist&&this.Idtoken&&(this.dataarrayobj=this.spendlist,this.chartdiv="chartdiv-"+this.Idtoken,console.log(this.spendlist,this.Idtoken,this.chartdiv),this.chartCreated=!1,this.spinner.show())}ngOnInit(){this.spendlist&&this.Idtoken&&(this.spinner.show(),this.createChart())}ngAfterViewChecked(){this.spendlist&&this.Idtoken&&!this.chartCreated&&this.createChart()}createChart(){this.ngZone.runOutsideAngular(()=>{if(this.chart&&this.chart.dispose(),!document.getElementById(this.chartdiv))return console.warn(`Element with id ${this.chartdiv} is missing in DOM.`),void this.spinner.hide();this.chart=l.vtF(this.chartdiv,c.C1),this.chartCreated=!0,this.chart.data=this.dataarrayobj;let r=this.chart.xAxes.push(new c.cX);r.renderer.minGridDistance=25,r.renderer.labels.template.fontSize=12,r.renderer.labels.template.rotation=45,r.renderer.grid.template.location=0,this.chart.yAxes.push(new c.FL);let a=this.chart.series.push(new c.kW);a.name="matprice",a.fill=l.yWT(this.colorcode),a.dataFields.valueY="matprice",a.dataFields.dateX="date",a.columns.template.propertyFields.fillOpacity="fillOpacity",a.columns.template.propertyFields.stroke="stroke",a.columns.template.propertyFields.strokeWidth="strokeWidth",a.columns.template.propertyFields.strokeDasharray="columnDash",a.tooltip&&(a.tooltip.label.textAlign="middle");let o=this.chart.series.push(new c.Im);o.name="Expenses",o.dataFields.valueY="matprice",o.dataFields.dateX="date",o.stroke=l.yWT(this.colorcode,.3),o.strokeWidth=3,o.propertyFields.strokeDasharray="lineDash",o.tooltip&&(o.tooltip.label.textAlign="middle");let u=o.bullets.push(new c.Dv);u.fill=l.yWT("#fdd400"),u.tooltipText="[#fff font-size: 0.8rem]{name} \n {dateX}\n[/][#fff font-size: 1rem]{valueY}[/] [#fff]{additional}[/]";let f=u.createChild(l.jlt);f.radius=4,f.fill=l.yWT("#fff"),f.strokeWidth=1,this.chart.cursor=new c.Av,this.chart.cursor.behavior="zoomX",this.chart.cursor.lineX.disabled=!0,this.chart.cursor.lineY.disabled=!0,this.chart.scrollbarX=new l.ZeV,this.chart.scrollbarX.marginBottom=30,this.chart.events.on("ready",()=>{this.spinner.hide()})}),this.chart.events.on("ready",()=>{const t=new Date;let r;if("days"===this.zoomRange)r=new Date(t.getFullYear(),t.getMonth(),t.getDate()-7),this.chart.xAxes.getIndex(0).zoomToDates(r,t,!0);else if("months"===this.zoomRange){r=new Date(t.getFullYear(),t.getMonth()-6,1);const n=new Date(t.getFullYear(),t.getMonth()+1,1);this.chart.xAxes.getIndex(0).zoomToDates(r,n,!0)}})}ngOnDestroy(){this.chart&&this.chart.dispose(),this.spinner.hide()}static#t=this.\u0275fac=function(r){return new(r||i)(e.rXU(C.i),e.rXU(_.f),e.rXU(e.SKi),e.rXU(D.ex))};static#e=this.\u0275cmp=e.VBU({type:i,selectors:[["app-bar-line"]],inputs:{spendlist:["Spendlist","spendlist"],Idtoken:"Idtoken",colorcode:"colorcode",zoomRange:"zoomRange"},features:[e.OA$],decls:4,vars:2,consts:[[1,"shadow-lg","p-2","m-2",2,"width","99%","height","80vh",3,"id"],["bdColor","rgba(0, 0, 0, 0.8)","size","large","color","#fff","type","ball-clip-rotate-multiple",3,"fullScreen"],[2,"color","white"]],template:function(r,n){1&r&&(e.nrm(0,"div",0),e.j41(1,"ngx-spinner",1)(2,"p",2),e.EFF(3," Loading... "),e.k0s()()),2&r&&(e.Y8G("id","chartdiv-"+n.Idtoken),e.R7$(1),e.Y8G("fullScreen",!0))},dependencies:[D.et],styles:["#chartdiv[_ngcontent-%COMP%]{flex:1;height:90%;min-height:10px;width:100%;max-height:1500px}  g>rect{position:absolute;top:50px;background-color:red!important}  .amcharts-amexport-item.amcharts-amexport-item-level-0{position:relative;top:100px}"]})}return i})();function R(i,d){if(1&i){const t=e.RV6();e.j41(0,"donut-chart",4),e.bIt("dataEmitter",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.receiveData(n))}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("Spendlist",t.groupeddata)}}function A(i,d){if(1&i&&e.nrm(0,"app-bar-line",5),2&i){const t=e.XpG();e.Y8G("Idtoken",1)("colorcode","red")("Spendlist",t.data)("zoomRange","days")}}function B(i,d){if(1&i&&e.nrm(0,"app-bar-line",5),2&i){const t=e.XpG();e.Y8G("Idtoken",2)("colorcode","red")("Spendlist",t.groupeddatamonthly)("zoomRange","months")}}function O(i,d){if(1&i&&e.nrm(0,"app-bar-line",5),2&i){const t=e.XpG();e.Y8G("Idtoken",3)("colorcode","green")("Spendlist",t.investdata)("zoomRange","days")}}function j(i,d){if(1&i&&e.nrm(0,"app-bar-line",5),2&i){const t=e.XpG();e.Y8G("Idtoken",4)("colorcode","green")("Spendlist",t.groupeddatamonthlyinv)("zoomRange","months")}}const P=[{path:"main",component:(()=>{class i{constructor(t){this.fb=t,this.ischart="SDAY"}ngOnInit(){this.fb.getAllspendItems().subscribe(t=>{this.data=t}),this.fb.getmatgroupspendItems().subscribe(t=>{this.groupeddata=t}),this.fb.getAllSpendItemsMonthly().subscribe(t=>{this.groupeddatamonthly=t}),this.fb.getAllinvestItems().subscribe(t=>{this.investdata=t}),this.fb.getAllInvestItemsMonthly().subscribe(t=>{this.groupeddatamonthlyinv=t})}receiveData(t){console.log(t),this.fb.getmatgroupspendItems(t.startdate,t.enddate).subscribe(r=>{this.groupeddata=r})}static#t=this.\u0275fac=function(r){return new(r||i)(e.rXU(_.f))};static#e=this.\u0275cmp=e.VBU({type:i,selectors:[["app-dashboardmain"]],decls:16,vars:5,consts:[[1,"d-flex","justify-content-center","my-2"],[1,"btn","btn-sm","btn-info","mx-1","text-white",3,"click"],[3,"Spendlist","dataEmitter",4,"ngIf"],[3,"Idtoken","colorcode","Spendlist","zoomRange",4,"ngIf"],[3,"Spendlist","dataEmitter"],[3,"Idtoken","colorcode","Spendlist","zoomRange"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"button",1),e.bIt("click",function(){return n.ischart="SDAY"}),e.EFF(2,"DAY SPENDS"),e.k0s(),e.j41(3,"button",1),e.bIt("click",function(){return n.ischart="SMONTH"}),e.EFF(4,"MONTH SPENDS"),e.k0s(),e.j41(5,"button",1),e.bIt("click",function(){return n.ischart="GROUP"}),e.EFF(6,"GROUP"),e.k0s(),e.j41(7,"button",1),e.bIt("click",function(){return n.ischart="IDAY"}),e.EFF(8,"DAY INVEST"),e.k0s(),e.j41(9,"button",1),e.bIt("click",function(){return n.ischart="IMONTH"}),e.EFF(10,"MONTH INVEST"),e.k0s()(),e.DNE(11,R,1,1,"donut-chart",2),e.DNE(12,A,1,4,"app-bar-line",3),e.DNE(13,B,1,4,"app-bar-line",3),e.DNE(14,O,1,4,"app-bar-line",3),e.DNE(15,j,1,4,"app-bar-line",3)),2&r&&(e.R7$(11),e.Y8G("ngIf","GROUP"==n.ischart),e.R7$(1),e.Y8G("ngIf","SDAY"==n.ischart),e.R7$(1),e.Y8G("ngIf","SMONTH"==n.ischart),e.R7$(1),e.Y8G("ngIf","IDAY"==n.ischart),e.R7$(1),e.Y8G("ngIf","IMONTH"==n.ischart))},dependencies:[g.bT,F,T]})}return i})()},{path:"**",redirectTo:"main"}];let z=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=e.$C({type:i});static#r=this.\u0275inj=e.G2t({imports:[k.iI.forChild(P),k.iI]})}return i})();var G=s(99631),x=s(86600),S=s(6914);s(49969);let N=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=e.$C({type:i});static#r=this.\u0275inj=e.G2t({imports:[g.MD,x.yE,S.Gj,S.Gj,x.yE]})}return i})(),Y=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=e.$C({type:i});static#r=this.\u0275inj=e.G2t({imports:[g.MD,z,D.PO,v.RG,G.fS,m.X6,x.WX,w.YN,N]})}return i})()}}]);